# 功能展示

本文档详细介绍系统的各项功能和使用方法。

## 目录

- [项目管理](#项目管理)
- [报表管理](#报表管理)
- [报表编辑器](#报表编辑器)
- [组件库](#组件库)
- [属性编辑](#属性编辑)
- [报表查看](#报表查看)

---

## 项目管理

### 功能概述

项目是组织报表的最高层级，每个项目可以包含多个报表。

### 主要功能

- ✅ 创建项目
- ✅ 查看项目列表
- ✅ 编辑项目信息
- ✅ 删除项目
- ✅ 进入项目查看报表

### 使用步骤

1. **访问首页**
   - 打开浏览器访问 `http://localhost:3000`
   - 看到项目列表页面

2. **创建新项目**
   - 点击右上角 "创建项目" 按钮
   - 填写项目名称（必填）
   - 填写项目描述（可选）
   - 点击 "创建" 按钮

3. **查看项目**
   - 在项目卡片上看到项目名称和描述
   - 点击 "查看报表" 进入该项目的报表列表

4. **删除项目**
   - 点击项目卡片上的 "删除" 按钮
   - 确认删除操作
   - 注意：删除项目会同时删除该项目下的所有报表和组件

---

## 报表管理

### 功能概述

报表是展示数据的容器，每个报表可以包含多个可视化组件。

### 主要功能

- ✅ 创建报表
- ✅ 查看报表列表
- ✅ 编辑报表
- ✅ 查看报表
- ✅ 删除报表

### 使用步骤

1. **进入项目**
   - 从首页点击项目的 "查看报表" 按钮
   - 进入该项目的报表列表页

2. **创建报表**
   - 点击右上角 "创建报表" 按钮
   - 填写报表名称（必填）
   - 填写报表描述（可选）
   - 点击 "创建" 按钮

3. **编辑报表**
   - 点击报表卡片上的 "编辑" 按钮
   - 进入报表编辑器

4. **查看报表**
   - 点击报表卡片上的 "查看" 按钮
   - 进入报表查看模式（只读）

5. **删除报表**
   - 点击报表卡片上的 "删除" 按钮
   - 确认删除操作

---

## 报表编辑器

### 功能概述

报表编辑器是系统的核心功能，提供拖放式的可视化编辑体验。

### 界面布局

```
┌─────────────────────────────────────────────────────┐
│  [← 返回]  报表名称                     [💾 保存]    │
├───────────┬─────────────────────────┬───────────────┤
│           │                         │               │
│  组件库    │      画布区域            │  属性编辑器    │
│           │                         │               │
│  📦 文本   │    [拖放组件到这里]      │  组件属性:     │
│  📊 柱状图 │                         │  • 标题       │
│  📈 折线图 │    [可拖动和调整大小]    │  • 数据       │
│  🥧 饼图   │                         │  • 样式       │
│           │                         │  • 位置       │
│           │                         │               │
└───────────┴─────────────────────────┴───────────────┘
```

### 主要功能

#### 1. 添加组件

**方法：拖拽添加**
- 从左侧组件库选择组件
- 按住鼠标左键拖动组件
- 拖动到画布区域
- 释放鼠标，组件被添加到画布

**组件类型**：
- 📝 文本 - 显示静态或动态文本
- 📊 柱状图 - 显示条形图表
- 📈 折线图 - 显示趋势线图表
- 🥧 饼图 - 显示占比饼图

#### 2. 移动组件

- 点击选中组件（显示蓝色边框）
- 按住组件拖动到新位置
- 释放鼠标完成移动

#### 3. 调整大小

- 选中组件后，四个角落出现调整手柄
- 拖动手柄调整组件大小：
  - 右下角：向右下扩展
  - 左下角：向左下扩展
  - 右上角：向右上扩展
  - 左上角：向左上扩展

#### 4. 编辑属性

- 选中组件
- 右侧属性编辑器显示该组件的所有可编辑属性
- 修改属性值，组件实时更新
- 属性自动保存到后端

#### 5. 保存报表

- 点击右上角 "保存" 按钮
- 所有更改已在编辑过程中自动保存
- 保存按钮主要用于确认和提示

---

## 组件库

### 文本组件

**用途**: 显示标题、说明文字、数值等文本内容

**可配置属性**:
- 内容：文本内容
- 字体大小：12-72px
- 颜色：任意颜色
- 字体粗细：normal、bold、bolder、lighter
- 对齐方式：左对齐、居中、右对齐

**使用场景**:
- 报表标题
- 章节标题
- 数据标签
- 说明文字
- KPI数值显示

**示例配置**:
```json
{
  "content": "销售总额",
  "fontSize": 24,
  "color": "#333333",
  "fontWeight": "bold",
  "textAlign": "center"
}
```

---

### 柱状图

**用途**: 对比不同类别的数据大小

**可配置属性**:
- 标题：图表标题
- X轴数据：类别数组
- 数据：数值数组
- 颜色：柱子颜色

**使用场景**:
- 销售额对比
- 产品销量对比
- 部门业绩对比
- 月度数据对比

**示例配置**:
```json
{
  "title": "月度销售额",
  "xAxisData": ["1月", "2月", "3月", "4月", "5月"],
  "seriesData": [120, 200, 150, 80, 170],
  "color": "#5470c6"
}
```

**视觉效果**:
```
    200 ┤     ▓▓▓
        ┤     ▓▓▓
    150 ┤ ▓▓▓ ▓▓▓ ▓▓▓     ▓▓▓
        ┤ ▓▓▓ ▓▓▓ ▓▓▓     ▓▓▓
    100 ┤ ▓▓▓ ▓▓▓ ▓▓▓ ▓▓▓ ▓▓▓
        └─────────────────────
          1月  2月  3月  4月  5月
```

---

### 折线图

**用途**: 显示数据随时间的变化趋势

**可配置属性**:
- 标题：图表标题
- X轴数据：时间点数组
- 数据：数值数组
- 颜色：线条颜色
- 平滑曲线：是否使用平滑曲线

**使用场景**:
- 趋势分析
- 时间序列数据
- 增长曲线
- 波动分析

**示例配置**:
```json
{
  "title": "访问量趋势",
  "xAxisData": ["周一", "周二", "周三", "周四", "周五"],
  "seriesData": [120, 200, 150, 180, 220],
  "color": "#91cc75",
  "smooth": true
}
```

**视觉效果**:
```
    220 ┤                    ●
        ┤                ╭──╯
    180 ┤            ╭──╯
        ┤        ╭──╯
    150 ┤      ╭╯
        ┤  ╭──╯
    120 ┤──╯
        └──────────────────────
          周一 周二 周三 周四 周五
```

---

### 饼图

**用途**: 显示各部分占总体的比例

**可配置属性**:
- 标题：图表标题
- 数据：包含名称和数值的对象数组

**使用场景**:
- 市场份额
- 预算分配
- 类别占比
- 构成分析

**示例配置**:
```json
{
  "title": "销售渠道占比",
  "data": [
    { "name": "线上", "value": 335 },
    { "name": "线下", "value": 310 },
    { "name": "代理", "value": 234 },
    { "name": "直销", "value": 135 }
  ]
}
```

**视觉效果**:
```
         线上 33%
           ╱╲
       ╱─────╲
      ╱   ⟋   ╲    代理 23%
     │   ⟋ ⟋   │
     │  ⟋   ⟋  │
     │ ⟋─────⟋ │
      ╲       ╱
       ╲─────╱
         ╲╱
    线下 31%  直销 13%
```

---

## 属性编辑

### 基于 JSON Schema 的属性系统

系统使用 JSON Schema 定义组件的属性结构，自动生成对应的编辑界面。

### 支持的属性类型

#### 1. 字符串 (string)

普通文本输入框

```json
{
  "type": "string",
  "title": "标题"
}
```

#### 2. 数字 (number)

数字输入框，支持最小值和最大值

```json
{
  "type": "number",
  "title": "字体大小",
  "minimum": 12,
  "maximum": 72
}
```

#### 3. 颜色 (string with format: color)

颜色选择器

```json
{
  "type": "string",
  "title": "颜色",
  "format": "color"
}
```

#### 4. 枚举 (enum)

下拉选择框

```json
{
  "type": "string",
  "title": "对齐方式",
  "enum": ["left", "center", "right"]
}
```

#### 5. 布尔值 (boolean)

复选框

```json
{
  "type": "boolean",
  "title": "平滑曲线"
}
```

#### 6. 数组/对象 (array/object)

JSON 文本框，支持复杂数据结构

```json
{
  "type": "array",
  "title": "数据",
  "items": { "type": "number" }
}
```

### 实时预览

- 修改属性时，组件立即更新显示
- 无需点击保存或应用按钮
- 提供即时的视觉反馈

### 位置和大小

除了组件特定属性外，还可以精确设置：

- X 坐标：组件左上角的水平位置
- Y 坐标：组件左上角的垂直位置
- 宽度：组件的宽度（像素）
- 高度：组件的高度（像素）

---

## 报表查看

### 功能概述

报表查看模式提供只读的报表展示，适合向他人展示或演示。

### 主要特点

- 🔒 只读模式：不能编辑或移动组件
- 🔄 刷新功能：重新加载数据
- 📱 响应式：适配不同屏幕尺寸
- 🎯 专注展示：隐藏编辑工具

### 使用方法

1. 在报表列表点击 "查看" 按钮
2. 进入只读查看模式
3. 点击 "刷新" 按钮重新加载数据
4. 点击 "返回" 返回报表列表

---

## 快捷键

当前版本暂不支持快捷键，计划在未来版本中添加：

- `Ctrl/Cmd + S`: 保存
- `Ctrl/Cmd + Z`: 撤销
- `Ctrl/Cmd + Y`: 重做
- `Delete`: 删除选中组件
- `Ctrl/Cmd + C`: 复制
- `Ctrl/Cmd + V`: 粘贴
- `Ctrl/Cmd + D`: 复制组件
- 方向键: 微调组件位置

---

## 最佳实践

### 报表设计建议

1. **布局规划**
   - 从上到下、从左到右安排组件
   - 重要信息放在顶部和左侧
   - 保持适当的留白

2. **颜色使用**
   - 使用一致的配色方案
   - 避免使用过多颜色
   - 考虑色盲友好的配色

3. **组件大小**
   - 标题使用较大字体
   - 图表保持足够大小以清晰显示
   - 相似组件使用统一尺寸

4. **数据展示**
   - 选择合适的图表类型
   - 避免数据过载
   - 提供必要的上下文信息

### 性能优化

1. **组件数量**
   - 单个报表建议不超过20个组件
   - 过多组件会影响加载和编辑性能

2. **数据量**
   - 图表数据点建议不超过100个
   - 大数据集考虑分页或聚合

3. **刷新频率**
   - 避免频繁刷新
   - 使用适当的缓存策略

---

## 故障排除

### 组件无法拖拽

**可能原因**:
- 浏览器不支持拖拽API
- JavaScript错误

**解决方法**:
- 使用现代浏览器（Chrome、Firefox、Edge）
- 检查浏览器控制台错误
- 刷新页面重试

### 属性修改不生效

**可能原因**:
- 网络连接问题
- 后端服务未启动
- 数据格式错误

**解决方法**:
- 检查网络连接
- 确认后端服务运行中
- 查看浏览器控制台错误信息

### 图表显示异常

**可能原因**:
- 数据格式不正确
- ECharts加载失败

**解决方法**:
- 检查数据格式是否符合要求
- 确认数组长度匹配
- 刷新页面重新加载

---

## 未来功能

以下功能计划在后续版本中实现：

- [ ] 更多组件类型（表格、散点图、地图等）
- [ ] 数据源配置（API、数据库、Excel）
- [ ] 组件联动和交互
- [ ] 报表模板
- [ ] 导出功能（PDF、PNG、Excel）
- [ ] 分享和发布
- [ ] 权限管理
- [ ] 版本历史
- [ ] 协同编辑
- [ ] 移动端支持

---

## 反馈和建议

如果您有任何问题、建议或功能请求，欢迎：

- 提交 [GitHub Issue](https://github.com/latel/github-copilot/issues)
- 发起 [Pull Request](https://github.com/latel/github-copilot/pulls)
- 查看 [CONTRIBUTING.md](CONTRIBUTING.md) 了解如何贡献
